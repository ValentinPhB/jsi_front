(()=>{function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,n,i,r,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(r,s){var o=e.apply(t,i);function a(e){n(o,r,s,a,c,"next",e)}function c(e){n(o,r,s,a,c,"throw",e)}a(void 0)}))}}function r(e){return s.apply(this,arguments)}function s(){return(s=i(regeneratorRuntime.mark((function e(t){var n,i,r,s,o,a,c,l,u,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("img"),i=document.createElement("h2"),r=document.createElement("h3"),s=document.querySelector(".best-movie__img"),o=document.querySelector(".best-movie__title"),a=document.querySelector(".best-movie__resume"),e.next=8,fetch(t);case 8:return c=e.sent,e.next=11,c.json();case 11:return l=e.sent,e.next=14,l.results[0].id;case 14:return u=e.sent,e.next=17,fetch("http://localhost:8000/api/v1/titles/".concat(u));case 17:return h=e.sent,e.next=20,h.json();case 20:d=e.sent,n.src=d.image_url,n.alt="affiche du film '".concat(d.title,"'."),n.setAttribute("id",d.id),n.setAttribute("class","forModal"),i.innerHTML='"'.concat(d.title,'"'),r.innerHTML='"'.concat(d.long_description,'"'),s.appendChild(n),o.appendChild(i),a.appendChild(r);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=function(){function n(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,n),this.element=t,this.options=Object.assign({},{slidesToScroll:1,slidesVisible:1,loop:!1},r);var s=[].slice.call(t.children);this.isMobile=!1,this.movesCallbacks=[],this.currentItem=0,this.root=this.createDivWithClass("carousel"),this.container=this.createDivWithClass("carousel__container"),this.root.setAttribute("tabIndex","0"),this.root.appendChild(this.container),this.element.appendChild(this.root),this.items=s.map((function(e){var t=i.createDivWithClass("carousel__item");return t.appendChild(e),i.container.appendChild(t),t})),this.setStyle(),this.createNavigation(),this.movesCallbacks.forEach((function(e){return e(0)})),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this)),this.root.addEventListener("keyup",(function(e){"ArrowRight"===e.key||"Right"===e.key?i.next():"ArrowLeft"!==e.key&&"Left"!==e.key||i.prev()}))}var i,r;return i=n,(r=[{key:"createDivWithClass",value:function(e){var t=document.createElement("div");return t.setAttribute("class",e),t}},{key:"setStyle",value:function(){var e=this,t=this.items.length/this.slidesVisible;this.container.style.width=100*t+"%",this.items.forEach((function(n){return n.style.width=100/e.slidesVisible/t+"%"}))}},{key:"createNavigation",value:function(){var e=this,t=this.createDivWithClass("carousel__next"),n=this.createDivWithClass("carousel__prev");this.root.appendChild(t),this.root.appendChild(n),t.addEventListener("click",this.next.bind(this)),n.addEventListener("click",this.prev.bind(this)),!0!==this.options.loop&&this.onMove((function(i){0===i?n.classList.add("carousel__prev--hidden"):n.classList.remove("carousel__prev--hidden"),void 0===e.items[e.currentItem+e.slidesVisible]?t.classList.add("carousel__next--hidden"):t.classList.remove("carousel__next--hidden")}))}},{key:"next",value:function(){this.currentItem+this.slidesToScroll<=this.items.length?this.goToItem(this.currentItem+this.slidesToScroll):this.currentItem+this.slidesToScroll>this.items.length&&this.goToItem(this.currentItem+1)}},{key:"prev",value:function(){this.currentItem-this.slidesToScroll<0?this.goToItem(this.currentItem-1):this.currentItem-this.slidesToScroll>=0&&this.goToItem(this.currentItem-this.slidesToScroll)}},{key:"goToItem",value:function(e){if(e<0){if(!this.options.loop)return;e=this.items.length-this.slidesVisible}else if(e>=this.items.length||void 0===this.items[this.currentItem+this.slidesVisible]&&e>this.currentItem){if(!this.options.loop)return;e=0}var t=-100*e/this.items.length;this.container.style.transform="translate3d("+t+"%, 0, 0)",this.currentItem=e,this.movesCallbacks.forEach((function(t){return t(e)}))}},{key:"onMove",value:function(e){this.movesCallbacks.push(e)}},{key:"onWindowResize",value:function(){var e=this,t=window.innerWidth<800;t!==this.isMobile&&(this.isMobile=t,this.setStyle(),this.movesCallbacks.forEach((function(t){return t(e.currentItem)})))}},{key:"slidesToScroll",get:function(){return this.isMobile?1:this.options.slidesToScroll}},{key:"slidesVisible",get:function(){return this.isMobile?1:this.options.slidesVisible}}])&&t(i.prototype,r),n}();function a(e,t){return c.apply(this,arguments)}function c(){return(c=i(regeneratorRuntime.mark((function e(t,n){var i,r,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return i=e.sent,e.prev=3,e.next=6,Promise.all([fetch(i[0]),fetch(i[1]),fetch(i[2])]);case 6:return r=e.sent,s=r.map((function(e){return e.json()})),e.next=10,Promise.all(s);case 10:return o=e.sent,e.next=13,u(o,n);case 13:return e.next=15,v(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}function l(e){var t=Array.from({length:4}),n=[];for(var i in t){var r="".concat(e+i);n.push(r)}return n.shift(),n}function u(e,t){var n=[];for(var i in e)n.push(e[i].results);n.forEach((function(e){e.forEach((function(e){var n=document.createElement("img"),i=document.createElement("h4");n.src=e.image_url,n.alt="affiche du film '".concat(e.title,"'."),n.setAttribute("class","forModal"),n.setAttribute("id",e.id),i.innerHTML='"'.concat(e.title,'"');var r=document.createElement("div"),s=document.createElement("div");s.setAttribute("class","carousel__item-body"),n.setAttribute("id",e.id),r.setAttribute("class","carousel__img-format"),r.appendChild(n),s.appendChild(i),r.appendChild(s),document.querySelector(t).appendChild(r)}))}))}function h(){return d.apply(this,arguments)}function d(){return(d=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("myModal"),document.getElementsByClassName("modal__close")[0].addEventListener("click",(function(){t.style.display="none"})),window.addEventListener("click",(function(e){e.target!=t&&(t.style.display="none")})),document.querySelectorAll(".forModal").forEach((function(e){e.addEventListener("click",i(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.id,n.next=3,m(i);case 3:t.style.display="block";case 4:case"end":return n.stop()}}),n)}))))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return(p=i(regeneratorRuntime.mark((function e(t){var n,i,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://localhost:8000/api/v1/titles/".concat(t),e.next=3,fetch(n);case 3:return i=e.sent,e.next=6,i.json();case 6:r=e.sent,(s=document.getElementById("img-movie")).src=r.image_url,s.alt="affiche du film '".concat(r.title,"'."),f(r,"title","Titre : "),f(r,"genres","Genre(s) : "),f(r,"date_published","Date de sortie : "),f(r,"rated","Rated : "),f(r,"imdb_score","Score Imdb : "),f(r,"directors","Réalisateur(s) : "),f(r,"actors","Acteur(s) : "),f(r,"duration","Durée : "),f(r,"countries","Pays d'origine : "),f(r,"worldwide_gross_income","Résultat au Box Office : "),f(r,"long_description","");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n){null===e[t]?document.getElementById(t).innerHTML="".concat(n,"Valeur manquante."):null!=e[t]&&(document.getElementById(t).innerHTML="".concat(n).concat(e[t],"."))}function v(e){new o(document.querySelector(e),{slidesToScroll:1,slidesVisible:3})}function g(){return(g=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("http://localhost:8000/api/v1/titles/?sort_by=-imdb_score&page=1");case 2:return e.next=4,a("http://localhost:8000/api/v1/titles/?sort_by=-imdb_score&page=","#carousel1");case 4:return e.next=6,a("http://localhost:8000/api/v1/titles/?genre=drama&page=","#carousel2");case 6:return e.next=8,a("http://localhost:8000/api/v1/titles/?genre=romance&page=","#carousel3");case 8:return e.next=10,a("http://localhost:8000/api/v1/titles/?genre=comedy&page=","#carousel4");case 10:return e.next=12,h();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.addEventListener("DOMContentLoaded",(function(){return g.apply(this,arguments)}))})();